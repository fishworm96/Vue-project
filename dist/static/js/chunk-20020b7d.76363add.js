(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20020b7d"],{"126c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Upload",{ref:"upload",attrs:{action:e.baseURL+"/upload_file",multiple:"","before-upload":e.beforeUpload,"on-success":e.handleSuccess,"show-upload-list":!1}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("Upload Files")])],1),n("Button",{on:{click:e.handleUpload}},[e._v("上传吧")]),n("Table",{attrs:{columns:e.columns,data:e.fileList}}),n("Modal",{model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n("div",{staticStyle:{height:"300px",overflow:"auto"}},[e._v(" "+e._s(e.content)+" ")])])],1)},o=[],l=(n("caad"),n("2532"),n("f121")),u=n("7e1e"),a=n("f1ed"),s={data:function(){var e=this;this.$createElement;return{baseURL:l["a"],showModal:!1,content:"",file:{},columns:[{title:"文件key",key:"key"},{title:"文件名",key:"file_name"},{title:"文件类型",key:"file_type"},{title:"文件大小",key:"file_size"},{title:"上传时间",key:"createdAt"},{title:"存储有效期",key:"storage_time",render:function(e,t){var n=t.row;return e("span",[n.storage_time?n.storage_time:"永久"])}},{title:"操作",key:"handle",render:function(t,n){var i=n.row;return t("span",[t("i-button",{on:{click:e.download.bind(e,i.key)}},["下载"]),t("i-button",{attrs:{disabled:!i.file_type.includes("text")},on:{click:e.showFileContent.bind(e,i.key)}},["显示内容"]),t("i-button",{on:{click:e.deleteFile.bind(e,i.key)}},["删除"])])}}],fileList:[]}},methods:{beforeUpload:function(e){return this.file=e,!1},handleUpload:function(){this.$refs.upload.post(this.file)},handleSuccess:function(){this.$Message.success("文件上传成功"),this.updateFileList(),this.file=null},download:function(e){Object(a["a"])({url:"".concat(l["a"],"/get_file"),params:{key:e,type:"download"}})},showFileContent:function(e){var t=this;Object(u["b"])({key:e,type:"text"}).then((function(e){t.content=e,t.showModal=!0}))},deleteFile:function(e){var t=this;Object(u["a"])(e).then((function(e){t.updateFileList()}))},updateFileList:function(){var e=this;Object(u["d"])().then((function(t){e.fileList=t}))}},mounted:function(){this.updateFileList()}},r=s,c=n("2877"),d=Object(c["a"])(r,i,o,!1,null,null,null);t["default"]=d.exports},"7e1e":function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var i=n("365c"),o=function(){return i["a"].request({url:"/getTableData",method:"get"})},l=function(){return i["a"].request({url:"/getFolderList",method:"get"})},u=function(){return i["a"].request({url:"/getFileList",method:"get"})},a=function(){return i["a"].request({url:"get_file_list",params:{userId:1},method:"get"})},s=function(e){var t=e.key,n=e.type;return i["a"].request({url:"get_file",data:{key:t,type:n},method:"post"})},r=function(e){return i["a"].request({url:"delete_file",data:{key:e},method:"delete"})}}}]);